(function($){"use strict";class PasswordToggle{constructor(form){this.form=$(form);this.toggleButtons=this.form.find(".attrua-toggle-password");this.initialize()}initialize(){this.toggleButtons.each((_,button)=>{const $button=$(button);$button.on("click",e=>{e.preventDefault();const $field=$button.closest(".attrua-password-field");const $input=$field.find("input");const $icon=$button.find(".ti");if($input.length){const isPassword=$input.attr("type")==="password";$input.attr("type",isPassword?"text":"password");$icon.removeClass(isPassword?"ti-eye":"ti-eye-off").addClass(isPassword?"ti-eye-off":"ti-eye");$button.attr("aria-label",isPassword?"Hide password":"Show password")}});$button.find(".ti").addClass("ti-eye");$button.attr("aria-label","Show password")})}}class LoginForm{constructor(form,options){this.form=$(form);this.options=$.extend({},LoginForm.defaults,options);this.submitButton=this.form.find(this.options.submitButtonSelector);this.usernameField=this.form.find("#attrua_username");this.passwordField=this.form.find("#attrua_password");this.requiredFields=this.form.find("input[required]");this.usernameError=this.usernameField.siblings(".attrua-field-error");this.passwordError=this.passwordField.siblings(".attrua-field-error");this.initialize()}initialize(){this.form.on("submit",e=>this.handleSubmit(e));this.requiredFields.on("input",()=>this.validateForm());new PasswordToggle(this.form);this.validateForm()}validateForm(){let isValid=true;this.usernameError.text("");this.passwordError.text("");if(!this.usernameField.val().trim()){isValid=false}if(!this.passwordField.val()){isValid=false}this.submitButton.prop("disabled",!isValid);return isValid}handleSubmit(event){if(!this.options.ajaxLogin){return}event.preventDefault();if(!this.validateForm()){return}this.submitButton.prop("disabled",true).text(this.options.i18n.loggingIn);this.form.off("submit").submit()}}LoginForm.defaults={submitButtonSelector:".attrua-submit-button",ajaxLogin:false,i18n:{loggingIn:"Logging in...",invalidCredentials:"Invalid username or password."}};$(document).ready(function(){$(".attrua-login-form").each(function(){const form=$(this);if(!$.data(this,"attrua-login")){$.data(this,"attrua-login",new LoginForm(this,window.attruaFront||{}))}})})})(jQuery);